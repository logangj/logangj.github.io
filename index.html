<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LJ Shapes V1</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: black;
        }
        svg {
            width: 750px;
            height: 750px;
            user-select: none;
        }
        .letter {
            cursor: grab;
            transition: transform 0.5s ease-out; /* Ease-out for fast start, slow finish on snap-back */
            pointer-events: all;
        }
        .letter:active {
            cursor: grabbing;
        }
        #logo-container {
            transition: transform 0.5s ease; /* Smooth flip animation */
        }
        path {
            pointer-events: stroke; /* Limit selectable area to the white stroke */
        }
    </style>
</head>
<body>
    <svg viewBox="-150 -280 750 750">
        <g id="logo-container">
            <!-- J Shape -->
            <g id="j-group" class="letter">
                <path d="M 175 75 H 350 V 250 A 125 125 0 0 1 100 255" fill="none" stroke="white" stroke-width="75" stroke-linecap="butt" stroke-linejoin="round" />
            </g>
            <!-- L Shape -->
            <g id="l-group" class="letter">
                <path d="M 105 -65 V 185 H 280" fill="none" stroke="white" stroke-width="75" stroke-linecap="butt" stroke-linejoin="round" />
            </g>
        </g>
    </svg>

    <script>
        const container = document.getElementById('logo-container');
        const svg = document.querySelector('svg');
        const letters = document.querySelectorAll('.letter');
        let clicks = 0;
        let timer;
        let containerRotation = 0;

        letters.forEach(letter => {
            let isDragging = false;
            let startX = 0, startY = 0;
            let dragStartX = 0, dragStartY = 0;
            let initialX = 0, initialY = 0;
            let letterRotation = 0;

            letter.addEventListener('mousedown', (e) => {
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                dragStartX = startX;
                dragStartY = startY;
                letter.style.transition = 'none'; // No transition while dragging
                let transformAttr = letter.getAttribute('transform') || '';
                let match = transformAttr.match(/translate\((-?\d+\.?\d*),\s*(-?\d+\.?\d*)\)/);
                initialX = match ? parseFloat(match[1]) : 0;
                initialY = match ? parseFloat(match[2]) : 0;
                letterRotation = parseFloat(letter.getAttribute('rotation') || 0);
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    let dx = e.clientX - startX;
                    let dy = e.clientY - startY;
                    // Adjust for container rotation only
                    let rad = (containerRotation * Math.PI) / 180;
                    let adjustedDx = dx * Math.cos(rad) + dy * Math.sin(rad);
                    let adjustedDy = -dx * Math.sin(rad) + dy * Math.cos(rad);
                    letter.setAttribute('transform', `translate(${initialX + adjustedDx}, ${initialY + adjustedDy}) rotate(${letterRotation}, 225, 185)`);
                }
            });

            document.addEventListener('mouseup', (e) => {
                if (isDragging) {
                    isDragging = false;
                    const endX = e.clientX;
                    const endY = e.clientY;
                    let dx = endX - dragStartX;
                    let dy = endY - dragStartY;
                    // Adjust for container rotation only
                    let rad = (containerRotation * Math.PI) / 180;
                    let adjustedDx = dx * Math.cos(rad) + dy * Math.sin(rad);
                    let adjustedDy = -dx * Math.sin(rad) + dy * Math.cos(rad);
                    if (Math.abs(dx) < 5 && Math.abs(dy) < 5) {
                        // Single click: flip individual letter
                        letterRotation -= 180; // Clockwise
                        letter.setAttribute('rotation', letterRotation);
                        letter.style.transition = 'transform 0.5s ease';
                        letter.setAttribute('transform', `translate(${initialX}, ${initialY}) rotate(${letterRotation}, 225, 185)`);
                    } else {
                        // Stay in place
                        initialX += adjustedDx;
                        initialY += adjustedDy;
                        letter.setAttribute('transform', `translate(${initialX}, ${initialY}) rotate(${letterRotation}, 225, 185)`);
                    }
                }
            });
        });

        // Triple click on background to flip both
        document.body.addEventListener('click', (e) => {
            if (!e.target.closest('.letter')) {
                clicks++;
                clearTimeout(timer);
                timer = setTimeout(() => clicks = 0, 400);
                if (clicks === 3) {
                    clicks = 0;
                    containerRotation -= 180; // Clockwise
                    container.setAttribute('transform', `rotate(${containerRotation}, 225, 185)`);
                }
            }
        });

        // Double click anywhere to reset all letters and container
        document.body.addEventListener('dblclick', (e) => {
            letters.forEach(letter => {
                letter.style.transition = 'transform 0.5s ease-out';
                letter.setAttribute('transform', '');
                letter.setAttribute('rotation', 0);
            });
            container.style.transition = 'transform 0.5s ease-out';
            container.setAttribute('transform', '');
            containerRotation = 0;
            e.preventDefault();
        });
    </script>
</body>
</html>
